<% content_for :header do %>
  <ul class="nav">
    <li class="nav-item">
      <%= link_to previous_path, class: "link-icon header-button btn btn-sm" do %>
        <%= octicon "arrow-left" %>
        <p>Back</p>
      <% end %>
    </li>
   <li class="nav-item">
     <%= render 'shared/email_recipe' %>
    </li>
  </ul>
<% end %>

<div class="container-fluid">
  <div class="row">
    <div class="recipe-heading container-fluid">
      <div class="row  p-2">
        <div class="p-0">
          <%= image_tag @recipe.photo_url, class: "recipe-img" %>
        </div>
        <div class="col">
          <h4 class="mt-2"><%= @recipe.name %></h4>
          <p class="small-font"><em><%= @categories %></em></p>
          <% if @recipe.source %>
            <p class="small-font"><em>From</em>
            <%= link_to @recipe.source, "http://#{@recipe.source}" %>
          <% end %>
          </p>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-lg-5 ingredients pt-3">
      <h5>Ingredients</h5>
      <%= format_ingredients @recipe.ingredients %>
    </div>
    <div class="col-lg-7 directions pt-3">
      <h5>Directions</h5>
      <%= simple_format @recipe.directions %>
    </div>
  </div>
  <div class="row ">
    <div class="col pt-3">
      <h5>Comments</h5>
      <% if logged_in? %>
        <div class="comments">
          <% if @recipe.comments.any? %>
            <% @recipe.comments.each do |comment| %>
              <div class="comment">
                <div class="comment-header">
                  <strong><%= comment.user.username %></strong>
                  <p><%= comment.created_at %></p>
                </div>
                <div class="comment-body">
                  <p><%= comment.body %></p>
                </div>
              </div>
            <% end %>
          <% else %>
            <p>No comments yet</p>
          <% end %>
        </div>
        <%= render 'comments/new' %>
      <% else %>
        <p>Please <%= link_to "login", login_path %> to view comments</p>
      <% end %>
    </div>
  </div>
</div>